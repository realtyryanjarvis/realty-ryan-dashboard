<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="300">
<title>Transaction Dashboard ‚Äî Realty Ryan</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #1a1408; font-family: 'Work Sans', sans-serif; color: #FAFAFA; min-height: 100vh; }

/* Password Gate */
#login-gate { display: none; }
#dashboard { display: block; }
.login-box { background: #261A05; padding: 48px; border-radius: 12px; border: 1px solid #5C3D14; width: 100%; max-width: 380px; text-align: center; }
.login-box h1 { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 300; letter-spacing: 0.15em; text-transform: uppercase; margin-bottom: 8px; }
.login-box .sub { font-size: 13px; color: #857D52; margin-bottom: 32px; }
.login-box input { width: 100%; padding: 14px 16px; background: #1a1408; border: 1px solid #5C3D14; border-radius: 6px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 14px; margin-bottom: 16px; outline: none; }
.login-box input:focus { border-color: #7A3B14; }
.login-box button { width: 100%; padding: 14px; background: #7A3B14; color: #FAFAFA; border: none; border-radius: 6px; font-family: 'Work Sans', sans-serif; font-size: 14px; font-weight: 600; cursor: pointer; text-transform: uppercase; letter-spacing: 0.1em; }
.login-box button:hover { background: #9A4B1A; }
.login-error { color: #ff887c; font-size: 12px; margin-bottom: 12px; display: none; }

/* Header */
.header-compact { background: #261A05; border-bottom: 2px solid #7A3B14; }
.hdr-top { display: flex; justify-content: space-between; align-items: center; padding: 14px 24px 10px; }
.hdr-top h1 { font-family: 'Cormorant Garamond', serif; font-size: 22px; font-weight: 300; letter-spacing: 0.12em; text-transform: uppercase; color: #FAFAFA; margin: 0; }
.hdr-actions { display: flex; gap: 6px; }
.btn-action { padding: 6px 12px; background: #7A3B14; color: #FAFAFA; border-radius: 4px; font-size: 11px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 0.05em; }
.btn-action:hover { background: #9A4B1A; text-decoration: none; }
.btn-offer { background: #c97a3b !important; }
.btn-offer:hover { background: #e08a42 !important; }
.btn-green { background: #2a5a3a; }
.btn-green:hover { background: #3a7a4a; }
.btn-purple { background: #3a2a5a; }
.btn-purple:hover { background: #4a3a7a; }
.hdr-numbers { display: flex; justify-content: center; align-items: center; gap: 0; padding: 8px 24px 14px; }
.hn { text-align: center; padding: 0 24px; }
.hn-num { font-family: 'Cormorant Garamond', serif; font-size: 36px; font-weight: 600; color: #FAFAFA; display: block; line-height: 1; }
.hn-lbl { font-size: 10px; color: #857D52; text-transform: uppercase; letter-spacing: 0.08em; margin-top: 2px; display: block; }
.hn.vol .hn-num { color: #7A3B14; }
.hn-divider { width: 1px; height: 36px; background: #3a2a10; }
.section-label { padding: 10px 24px 4px; font-family: 'Work Sans', sans-serif; font-size: 13px; font-weight: 600; color: #857D52; text-transform: uppercase; letter-spacing: 0.1em; }
.sl-count { color: #5C3D14; font-weight: 400; }
.new-listing-btn { display: inline-flex; align-items: center; gap: 6px; padding: 10px 20px; background: #7A3B14; color: #FAFAFA; text-decoration: none; border-radius: 6px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; transition: background 0.2s; }
.new-listing-btn:hover { background: #9A4B1A; }
/* Bottom Section */
.bottom-section { display: flex; gap: 20px; padding: 12px 24px 16px; }
.bottom-left { flex: 2; min-width: 0; }
.bottom-right { flex: 1; min-width: 260px; max-width: 340px; }
.stat { text-align: center; }
.stat-num { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 600; color: #7A3B14; }
.stat-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #857D52; }

/* Section Headers */
.section-header { padding: 16px 24px 8px; display: flex; align-items: center; gap: 12px; }
.section-header h2 { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 600; color: #FAFAFA; letter-spacing: 0.08em; }
.section-badge { background: #7A3B14; color: #FAFAFA; font-size: 11px; font-weight: 600; padding: 2px 10px; border-radius: 12px; }

/* Kanban Board */
.kanban { display: flex; gap: 12px; padding: 12px 24px 24px; overflow-x: auto; min-height: 200px; -webkit-overflow-scrolling: touch; }
.kanban-col { flex: 0 0 240px; background: #261A05; border-radius: 8px; overflow: hidden; }
.kanban-col-header { padding: 12px 14px 8px; border-bottom: 2px solid; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; display: flex; justify-content: space-between; align-items: center; }
.kanban-col-header .count { background: rgba(255,255,255,0.1); padding: 1px 8px; border-radius: 10px; font-size: 11px; }
.kanban-cards { padding: 8px; display: flex; flex-direction: column; gap: 8px; }

/* Cards */
.card { background: #1a1408; border-radius: 6px; padding: 12px; border-left: 3px solid; cursor: pointer; transition: transform 0.15s; display: block; }
.card:hover { transform: translateY(-1px); }
.card-address { font-weight: 600; font-size: 13px; color: #FAFAFA; margin-bottom: 3px; }
.card-sublabel { font-size: 10px; font-weight: 600; color: #7A3B14; text-transform: uppercase; letter-spacing: 1px; padding: 4px 0 6px; border-bottom: 1px solid #3a2a10; margin-bottom: 6px; }
.card-client { font-size: 11px; color: #857D52; margin-bottom: 4px; }
.card-price { font-family: 'Cormorant Garamond', serif; font-size: 18px; font-weight: 600; color: #7A3B14; }
.card-note { font-size: 10px; color: #857D52; margin-top: 4px; font-style: italic; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 220px; }
.card-meta { display: flex; justify-content: space-between; margin-top: 6px; font-size: 10px; color: #857D52; }

/* Column Colors */
.col-leads .kanban-col-header { border-color: #ff9f6b; color: #ff9f6b; }
.col-hot .kanban-col-header { border-color: #ff4444; color: #ff4444; }
.col-hot .card { border-left-color: #ff4444; }
.col-contingent .kanban-col-header { border-color: #a67c52; color: #a67c52; }
.col-contingent .card { border-left-color: #a67c52; }
.col-leads .card { border-left-color: #ff9f6b; }
.col-prep .kanban-col-header { border-color: #dbadff; color: #dbadff; }
.col-prep .card { border-left-color: #dbadff; }
.col-live .kanban-col-header { border-color: #46d67a; color: #46d67a; }
.col-live .card { border-left-color: #46d67a; }
.col-dd .kanban-col-header { border-color: #fbd75b; color: #fbd75b; }
.col-dd .card { border-left-color: #fbd75b; }
.col-closed .kanban-col-header { border-color: #5C3D14; color: #5C3D14; }
.col-closed .card { border-left-color: #5C3D14; }
.col-signed .kanban-col-header { border-color: #46d6db; color: #46d6db; }
.col-signed .card { border-left-color: #46d6db; }
.col-unsigned .kanban-col-header { border-color: #ff887c; color: #ff887c; }
.col-unsigned .card { border-left-color: #ff887c; }
.col-pending .kanban-col-header { border-color: #fbd75b; color: #fbd75b; }
.col-pending .card { border-left-color: #fbd75b; }

/* To-Do List */
.todo-section { padding: 4px 24px 12px; }
.todo-columns { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
.todo-column { background: rgba(38,26,5,0.5); border-radius: 8px; padding: 12px; }
.todo-column-header { font-size: 14px; font-weight: 600; color: #C89B5B; margin-bottom: 10px; padding-bottom: 8px; border-bottom: 1px solid #3a2a10; }
.todo-column-count { background: #3a2a10; color: #C89B5B; font-size: 11px; padding: 1px 7px; border-radius: 10px; margin-left: 6px; }
.todo-list { display: flex; flex-direction: column; gap: 6px; }
@media (max-width: 768px) { .todo-columns { grid-template-columns: 1fr; } }
.todo-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 14px; background: #261A05; border-radius: 6px; border-left: 3px solid #5C3D14; font-size: 13px; line-height: 1.4; }
.todo-item.high { border-left-color: #ff887c; }
.todo-item.medium { border-left-color: #fbd75b; }
.todo-item.low { border-left-color: #46d67a; }
.todo-check { width: 16px; height: 16px; border: 2px solid #5C3D14; border-radius: 3px; flex-shrink: 0; margin-top: 1px; cursor: pointer; }
.todo-text { flex: 1; color: #FAFAFA; }
.todo-deal { font-size: 10px; color: #7A3B14; background: rgba(122,59,20,0.2); padding: 1px 8px; border-radius: 10px; white-space: nowrap; margin-left: 8px; }
.todo-item .todo-check:hover { border-color: #7A3B14; background: rgba(122,59,20,0.2); }
.todo-item.done { opacity: 0.4; }
.todo-item.done .todo-text { text-decoration: line-through; }
.todo-drag-handle { color: #5C3D14; cursor: grab; font-size: 14px; padding: 0 4px; user-select: none; }
.todo-drag-handle:active { cursor: grabbing; }
.todo-item.dragging { opacity: 0.4; }
.todo-list.drag-over { background: rgba(122,59,20,0.15); border-radius: 6px; min-height: 40px; }
.todo-add-inline { margin-top: 8px; }
.todo-inline-input { width: 100%; padding: 8px 12px; background: #1a1408; border: 1px dashed #3a2a10; border-radius: 6px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 13px; outline: none; }
.todo-inline-input:focus { border-color: #7A3B14; border-style: solid; }
.todo-inline-input::placeholder { color: #5C3D14; }
.todo-edit-input { width: 100%; padding: 6px 8px; background: #1a1408; border: 1px solid #7A3B14; border-radius: 4px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 13px; outline: none; }
.todo-text { cursor: text; }
.todo-actions { display: none; gap: 4px; align-items: center; margin-left: 6px; flex-shrink: 0; }
.todo-item:hover .todo-actions { display: flex; }
.todo-action-btn { background: none; border: none; cursor: pointer; font-size: 12px; padding: 2px 4px; border-radius: 3px; opacity: 0.6; }
.todo-action-btn:hover { opacity: 1; background: rgba(255,255,255,0.1); }
.todo-pri-cycle { font-size: 10px; }
.todo-delete { color: #ff887c; font-size: 13px; }

/* Divider */
.divider { height: 1px; background: #5C3D14; margin: 8px 24px; }
/* Weekly Calendar */
.weekly-cal { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; padding: 8px 24px; }
.cal-day { background: #261A05; border-radius: 6px; padding: 8px 6px; min-height: 70px; }
.cal-today { border: 1px solid #7A3B14; background: #2a1e0a; }
.cal-day-label { font-family: 'Work Sans', sans-serif; font-size: 11px; font-weight: 600; color: #857D52; margin-bottom: 6px; text-align: center; text-transform: uppercase; letter-spacing: 0.05em; }
.cal-today .cal-day-label { color: #7A3B14; }
.cal-event { font-size: 11px; color: #FAFAFA; padding: 3px 4px; margin-bottom: 3px; background: #3a2a10; border-radius: 3px; line-height: 1.3; }
.cal-time { color: #a67c52; font-weight: 600; font-size: 9px; }
.cal-empty { font-size: 10px; color: #3a3020; text-align: center; padding-top: 10px; }

/* Referrals */
.referrals-section { padding: 8px 24px 16px; }
.ref-row { background: #261A05; border-radius: 8px; padding: 12px 16px; margin-bottom: 8px; border-left: 3px solid #a67c52; }
.ref-clients { font-family: 'Cormorant Garamond', serif; font-size: 16px; font-weight: 600; color: #FAFAFA; }
.ref-detail { font-size: 11px; color: #857D52; margin-top: 4px; }
.ref-notes { font-size: 10px; color: #5C3D14; margin-top: 4px; font-style: italic; }

.footer { padding: 16px 24px; text-align: center; font-size: 11px; color: #5C3D14; }

/* MOBILE ‚Äî TABLET */
@media (max-width: 768px) {
  .hdr-top { flex-direction: column; align-items: center; gap: 10px; padding: 12px 16px 8px; }
  .hdr-actions { flex-wrap: wrap; justify-content: center; gap: 6px; }
  .hdr-numbers { flex-wrap: wrap; gap: 4px; padding: 4px 16px 12px; }
  .hn { padding: 0 14px; }
  .hn-num { font-size: 28px; }
  .hn-divider { height: 28px; }
  .stat-num { font-size: 24px; }
  .section-header { padding: 12px 16px 6px; }
  .section-header h2 { font-size: 18px; }
  .kanban { padding: 8px 16px 20px; gap: 10px; }
  .kanban-col { flex: 0 0 200px; }
  .bottom-section { flex-direction: column; padding: 8px 16px; }
  .bottom-right { max-width: unset; min-width: unset; }
  .weekly-cal { grid-template-columns: repeat(7, 1fr); gap: 3px; }
  .cal-day { padding: 6px 4px; min-height: 60px; min-width: 80px; }
  .cal-event { font-size: 9px; padding: 2px 3px; }
  .cal-day-label { font-size: 11px; }
  .card { padding: 10px; }
  .card-address { font-size: 12px; }
  .card-price { font-size: 16px; }
  .card-note { max-width: 175px; }
  .divider { margin: 8px 16px; }
  .footer { padding: 12px 16px; }
}

/* MOBILE ‚Äî PHONE */
@media (max-width: 480px) {
  .hdr-top h1 { font-size: 18px; }
  .hdr-actions { width: 100%; }
  .btn-action { flex: 1; text-align: center; padding: 10px 8px; font-size: 12px; min-height: 44px; display: flex; align-items: center; justify-content: center; }
  .hdr-numbers { gap: 2px; padding: 4px 12px 10px; }
  .hn { padding: 0 8px; }
  .hn-num { font-size: 22px; }
  .hn-lbl { font-size: 8px; }
  .hn-divider { display: none; }
  .kanban { padding: 8px 12px 16px; flex-direction: column; overflow-x: visible; }
  .kanban-col { flex: none; width: 100%; min-width: unset; }
  .card { padding: 12px; }
  .card-address { font-size: 13px; }
  .card-price { font-size: 17px; }
  .card-note { max-width: 100%; font-size: 10px; white-space: normal; }
  .col-header { font-size: 13px; }
  .login-box { padding: 32px 24px; }
  .weekly-cal { grid-template-columns: repeat(3, 1fr); gap: 4px; }
  .cal-day { min-width: unset; min-height: 70px; padding: 8px; }
  .section-header { padding: 10px 12px 4px; }
  .section-header h2 { font-size: 16px; }
  .todo-columns { grid-template-columns: 1fr !important; }
  .bottom-section { padding: 8px 12px; }
}
</style>
</head>
<body>

<!-- PASSWORD GATE -->
<div id="login-gate">
  <div class="login-box">
    <h1>Realty Ryan</h1>
    <div class="sub">Transaction Dashboard</div>
    <div class="login-error" id="login-error">Incorrect password</div>
    <input type="password" id="pw-input" placeholder="Enter password" autofocus>
    <button onclick="checkPw()">Access Dashboard</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

<div class="header-compact">
  <div class="hdr-top">
    <h1>Realty Ryan</h1>
    <div class="hdr-actions">
      <a href="new-listing.html" class="btn-action">üè† New Listing</a>
      <a href="new-buyer.html" class="btn-action btn-green">üë§ New Buyer</a>
      <a href="write-offer.html" class="btn-action btn-offer">üìù Write Offer</a>
      <a href="listing-appointment.html" class="btn-action btn-purple">üìã Listing Appt</a>
    </div>
  </div>
  <div class="hdr-numbers">
    <div class="hn"><span class="hn-num">5</span><span class="hn-lbl">Active Listings</span></div>
    <div class="hn-divider"></div>
    <div class="hn"><span class="hn-num">5</span><span class="hn-lbl">Under Contract</span></div>
    <div class="hn-divider"></div>
    <div class="hn"><span class="hn-num">5</span><span class="hn-lbl">Closed</span></div>
    <div class="hn-divider"></div>
    <div class="hn"><span class="hn-num">11</span><span class="hn-lbl">Buyers</span></div>
    <div class="hn-divider"></div>
    <div class="hn vol"><span class="hn-num">$3.8M</span><span class="hn-lbl">2026 Volume</span></div>
  </div>
  <div style="text-align:right;padding:4px 24px 6px;font-size:11px;color:#857D52;">Last updated: Feb 17, 2026 4:00 PM</div>
</div>




<div class="section-header">
  <h2>üìå To-Do</h2>
  <span class="section-badge" id="todo-count">6</span>
</div>
<div class="todo-section">
  <div class="todo-columns" style="grid-template-columns: 1fr 1fr;">
    <div class="todo-column" data-person="ryan">
      <div class="todo-column-header">üë§ Ryan <span class="todo-column-count">4</span></div>
      <div class="todo-list" data-person="ryan">
        <div class="todo-item high" draggable="true" data-id="1" data-person="ryan" data-priority="high"><div class="todo-check" onclick="toggleTodo('1')"></div><div class="todo-text">Drive by 4309 The Plaza ‚Äî assess 4-plex for Marcello Homes (Viktor &amp; Marish Bogun) co-listing<span class="todo-deal">4309 The Plaza</span></div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('1')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('1')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>
        <div class="todo-item high" draggable="true" data-id="2" data-person="ryan" data-priority="high"><div class="todo-check" onclick="toggleTodo('2')"></div><div class="todo-text">Talk to builders about lots for Alexa &amp; Matt Evans ‚Äî Keen (Alex Bailey), Chiott, Epic Homes, Highlight, A3 Custom<span class="todo-deal">Evans Build</span></div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('2')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('2')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>
        <div class="todo-item medium" draggable="true" data-id="3" data-person="ryan" data-priority="medium"><div class="todo-check" onclick="toggleTodo('3')"></div><div class="todo-text">Review Evans land search results ‚Äî 30+ builder-owned lots in target areas compiled<span class="todo-deal">Evans Build</span></div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('3')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('3')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>
        <div class="todo-item high" draggable="true" data-id="4" data-person="ryan" data-priority="high"><div class="todo-check" onclick="toggleTodo('4')"></div><div class="todo-text">Send Buyer Agency Agreement to unsigned buyers</div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('4')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('4')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>
      </div>
      <div class="todo-add-inline">
        <input type="text" placeholder="+ Add to-do..." class="todo-inline-input" data-person="ryan" onkeydown="if(event.key==='Enter')addInlineTodo(this)">
      </div>
    </div>
    <div class="todo-column" data-person="ally">
      <div class="todo-column-header">üë©‚Äçüíº Ally <span class="todo-column-count">2</span></div>
      <div class="todo-list" data-person="ally">
        <div class="todo-item medium" draggable="true" data-id="5" data-person="ally" data-priority="medium"><div class="todo-check" onclick="toggleTodo('5')"></div><div class="todo-text">Update FUB pipeline stages in Admin (back Feb 20)</div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('5')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('5')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>
        <div class="todo-item medium" draggable="true" data-id="6" data-person="ally" data-priority="medium"><div class="todo-check" onclick="toggleTodo('6')"></div><div class="todo-text">Pull agent email list from MLS ‚Äî import into FUB tagged as Agent + New Listing Alerts</div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('6')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('6')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>
      </div>
      <div class="todo-add-inline">
        <input type="text" placeholder="+ Add to-do..." class="todo-inline-input" data-person="ally" onkeydown="if(event.key==='Enter')addInlineTodo(this)">
      </div>
    </div>
  </div>
</div>
<div class="divider"></div>


<div class="section-label">Listings <span class="sl-count">22</span></div>
<div class="kanban">
  <div class="kanban-col col-leads">
    <div class="kanban-col-header">Leads <span class="count">1</span></div>
    <div class="kanban-cards">
      <a href="deals/30.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4212 Montebello Dr</div>
        <div class="card-client">Rick Diaz</div>
        <div class="card-note">Seller lead - Home has been on market 143+ days ¬∑ Needs DOM reset + fresh marketing strategy</div>
      </a>
    </div>
  </div>
  <div class="kanban-col" style="border-top-color:#c97a3b;">
    <div class="kanban-col-header">Listing Appts <span class="count">3</span></div>
    <div class="kanban-cards">
      <a href="deals/29.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">168 Broadsound Pl, Mooresville</div>
        <div class="card-client">Teresa</div>
        <div class="card-price">$10M</div>
        <div class="card-note">Listing appointment Friday Feb 20 at 10 AM</div>
      </a>
      <a href="deals/27.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4309 The Plaza</div>
        <div class="card-client">Viktor Bogun</div>
        <div class="card-price">$2.20M</div>
        <div class="card-note">4-plex ¬∑ Co-listing prospect ¬∑ Listing appointment - No signed agreement yet</div>
      </a>
      <a href="deals/45.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1800 Chestnut St, Matthews</div>
        <div class="card-client">Logan Lopez</div>
        <div class="card-price">$1.25M</div>
        <div class="card-note">listing appointment ¬∑ Waiting for Logan to confirm appointment time.</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-prep">
    <div class="kanban-col-header">WIP / Pre-List <span class="count">3</span></div>
    <div class="kanban-cards">
      <a href="deals/20.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4601 General Pershing Dr</div>
        <div class="card-client">Nathan Holbrook</div>
        <div class="card-price">$650,000</div>
        <div class="card-note">Signed listing - Pre-market (WIP)</div>
      </a>
      <a href="deals/26.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">113 Scottsmoor</div>
        <div class="card-client">Brett Cockerham</div>
        <div class="card-note">Brett &amp; Sonia Cockerham ¬∑ Signed listing - Pre-market (WIP)</div>
        <div class="card-timeline" style="color:#fbd75b;font-size:11px;margin-top:4px;">‚è≥ - Feb 26 @ 1:30 PM ‚Äî Photos</div>
      </a>
      <a href="deals/24.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">709 Tennyson Drive</div>
        <div class="card-client">Shayna Seals</div>
        <div class="card-note">Signed listing agreement - Pre-market (WIP) ¬∑ Planning to list when trees bloom (spring 2026)</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-live">
    <div class="kanban-col-header">Active <span class="count">5</span></div>
    <div class="kanban-cards">
      <div class="card-sublabel">Existing Homes</div>
      <a href="deals/12.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4041 Hiddenbrook Dr</div>
        <div class="card-client">Fiorella Freile</div>
        <div class="card-price">$1.50M</div>
        <div class="card-note">New build, completed. Active listing - Just on market, lots of showings</div>
      </a>
      <div class="card-sublabel" style="margin-top:10px;">To Be Built</div>
      <a href="deals/6.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">626 Shelton - Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$4M</div>
        <div class="card-note">Active listing on market</div>
      </a>
      <a href="deals/7.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">3208 Mayfield- Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$3.12M</div>
        <div class="card-note">Active listing - ~12 months until completion (early 2027)</div>
      </a>
      <a href="deals/8.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">3320 Mayfield- Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$3.08M</div>
        <div class="card-note">Active listing - ~12 months until completion (early 2027)</div>
      </a>
      <a href="deals/9.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">3321 Auburn Ave- Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$2.88M</div>
        <div class="card-note">Active listing - Framing stage, expected completion early fall 2026</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-dd">
    <div class="kanban-col-header">Under Contract <span class="count">5</span></div>
    <div class="kanban-cards">
      <a href="deals/10.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1437 Montford - Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$2.23M</div>
        <div class="card-note">Under Contract ‚Äî Expected closing in 2-3 months (April/May 2026)</div>
        <div class="card-meta"><span>‚è∞ 56d ¬∑ Apr 15</span></div>
      </a>
      <a href="deals/42.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1820 Parson - Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$1.60M</div>
        <div class="card-note">Active listing - Framing stage, expected completion fall 2026 ¬∑ Under contract</div>
      </a>
      <a href="deals/5.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1816 Parson St- Keen Builders</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$1.45M</div>
        <div class="card-note">Under Contract at $1,450,000</div>
        <div class="card-meta"><span>‚è∞ 12d ¬∑ Mar 02</span></div>
      </a>
      <a href="deals/4.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">6040 Coatbridge Lane</div>
        <div class="card-client">Stuart Mossian</div>
        <div class="card-price">$620,000</div>
        <div class="card-note">Listing - Under Contract ¬∑ Buyers are purchasing 6527 Burlwood Road ($960K)</div>
        <div class="card-meta"><span>‚è∞ 8d ¬∑ Feb 26</span></div>
      </a>
      <a href="deals/14.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">404 N Laurel Ave</div>
        <div class="card-client">William Scolinos</div>
        <div class="card-price">$289,000</div>
        <div class="card-note">Under Contract - Through due diligence ¬∑ Closing: Feb 25, 2026</div>
        <div class="card-meta"><span>‚è∞ 7d ¬∑ Feb 25</span></div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-closed">
    <div class="kanban-col-header">Closed <span class="count">5</span></div>
    <div class="kanban-cards">
      <a href="deals/15.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1817 Union</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$1.45M</div>
        <div class="card-note">Closed at $1,450,000</div>
      </a>
      <a href="deals/35.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1009 Pryor St</div>
        <div class="card-client">Lucy Duet</div>
        <div class="card-price">$750,000</div>
        <div class="card-note">Closed 2026 at $750,000</div>
      </a>
      <a href="deals/31.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">732 Manhassett Rd</div>
        <div class="card-client"></div>
        <div class="card-price">$629,999</div>
        <div class="card-note">Do NOT contact seller</div>
      </a>
      <a href="deals/36.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">2719 Selwyn Ave #13</div>
        <div class="card-client">Caroline Piper</div>
        <div class="card-price">$504,250</div>
        <div class="card-note">Closed 2026 at $504,250</div>
      </a>
      <a href="deals/38.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">9130 Landsburg Ln</div>
        <div class="card-client">Annie Estabane</div>
        <div class="card-price">$469,999</div>
        <div class="card-note">Closed 2026 at $469,999</div>
      </a>
    </div>
  </div>
</div>

<div class="section-label">Buyers <span class="sl-count">11</span></div>
<div class="kanban">
  <div class="kanban-col col-hot">
    <div class="kanban-col-header">Hot Leads üî• <span class="count">5</span></div>
    <div class="kanban-cards">
      <a href="deals/22.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Alexa &amp; Matt Evans - Buyer</div>
        <div class="card-client">Alexa Evans</div>
        <div class="card-price">$3M</div>
        <div class="card-note">Budget: $3M target (stretch to $3.5M) ¬∑ Lot: 0.4+ acres, flat, pool, walkable</div>
      </a>
      <a href="deals/28.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Matt Connelly - Buyer</div>
        <div class="card-client">Matt Connelly</div>
        <div class="card-price">$700,000</div>
        <div class="card-note">timeline: Now ‚Äî actively looking ¬∑ hotlead: yes</div>
        <div class="card-timeline" style="color:#ff887c;font-size:11px;margin-top:4px;">üî• Now ‚Äî actively looking</div>
      </a>
      <a href="deals/21.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Lindsey Anderson - Buyer</div>
        <div class="card-client">Lindsey Anderson</div>
        <div class="card-price">$700,000</div>
        <div class="card-note">Budget: Comfortable around $700K, willing to go higher for the right home ¬∑ Tags: investor-interest, new-construction</div>
      </a>
      <a href="deals/23.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Matt &amp; Nina Houser - Buyer</div>
        <div class="card-client">Matt Houser, Nina Houser</div>
        <div class="card-price">$250,000</div>
        <div class="card-note">Budget: $200K-$300K for land ¬∑ Owners of Green Life Charlotte (matt@greenlifeclt.com)</div>
      </a>
      <a href="deals/43.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Jake Murphy - Buyer</div>
        <div class="card-client">Jake Murphy</div>
        <div class="card-note">hotlead: yes ¬∑ timeline: Now -- actively looking</div>
        <div class="card-timeline" style="color:#ff887c;font-size:11px;margin-top:4px;">üî• Now -- actively looking</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-leads">
    <div class="kanban-col-header">Leads <span class="count">3</span></div>
    <div class="kanban-cards">
      <a href="deals/37.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Caroline Piper - Buyer</div>
        <div class="card-client">Caroline Piper</div>
        <div class="card-price">$350,000</div>
        <div class="card-note">timeline: Flexible ‚Äî signed a lease, browsing</div>
        <div class="card-timeline" style="color:#46d6db;font-size:11px;margin-top:4px;">üìÖ Flexible ‚Äî signed a lease, browsing</div>
      </a>
      <a href="deals/41.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Rachel Bogia - Land/Wedding Venue</div>
        <div class="card-client">Rachel Bogia</div>
        <div class="card-note">timeline: Active</div>
        <div class="card-timeline" style="color:#ff887c;font-size:11px;margin-top:4px;">üî• Active</div>
      </a>
      <a href="deals/39.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Max &amp; Lauren Sandquist - Buyer</div>
        <div class="card-client">Max Sandquist</div>
        <div class="card-note">timeline: May 2026 ‚Äî lease ends</div>
        <div class="card-timeline" style="color:#46d6db;font-size:11px;margin-top:4px;">üìÖ May 2026 ‚Äî lease ends</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-contingent">
    <div class="kanban-col-header">Contingent on Sale üè† <span class="count">2</span></div>
    <div class="kanban-cards">
      <a href="deals/25.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Shayna &amp; Jordan Seals - Buyer</div>
        <div class="card-client">Shayna Seals</div>
        <div class="card-price">$1.20M</div>
        <div class="card-note">Budget: $1.2M max (may stretch for right home) ¬∑ Areas: South Charlotte (Providence Crossing, Berkeley in 28277), Waxhaw, Ballantyne</div>
        <div class="card-timeline" style="color:#46d6db;font-size:11px;margin-top:4px;">üìÖ After home sells ‚Äî low priority</div>
      </a>
      <a href="deals/40.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Nathan &amp; Lauren Holbrook - Buyer</div>
        <div class="card-client">Nathan Holbrook</div>
        <div class="card-note">timeline: TBD ‚Äî monitoring job situation ¬∑ contingent on sale</div>
        <div class="card-timeline" style="color:#46d6db;font-size:11px;margin-top:4px;">üìÖ TBD ‚Äî monitoring job situation</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-signed">
    <div class="kanban-col-header">Active Buyers <span class="count">0</span></div>
    <div class="kanban-cards">

    </div>
  </div>
  <div class="kanban-col col-pending">
    <div class="kanban-col-header">Under Contract <span class="count">1</span></div>
    <div class="kanban-cards">
      <a href="deals/2.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">6527 Burlwood Road</div>
        <div class="card-client">Stuart Mossian</div>
        <div class="card-price">$960,000</div>
        <div class="card-meta"><span>‚è∞ 8d ¬∑ Feb 26</span></div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-closed">
    <div class="kanban-col-header">Closed <span class="count">0</span></div>
    <div class="kanban-cards">

    </div>
  </div>
</div>


<div class="section-header">
  <h2>Sent Referrals</h2>
  <span class="section-badge">2</span>
</div>
<div class="referrals-section">
      <div class="ref-row">
        <div class="ref-clients">Megan &amp; Michael Norris</div>
        <div class="ref-detail">San Diego, CA &middot; Agent: Shana Weisman &middot; Fee: 25%</div>
        <div class="ref-notes">Buying in San Diego. Shana handling buyer side.</div>
      </div>
      <div class="ref-row">
        <div class="ref-clients">Taylor &amp; Daniel Napier</div>
        <div class="ref-detail">Moving to NC ‚Äî June 2026 &middot; Agent: TBD (incoming) &middot; Fee: 25%</div>
        <div class="ref-notes">Referred out, moving to NC ~June 2026. Send housewarming gift when they close.</div>
      </div>
</div>

<div class="footer">Realty Ryan & Associates ¬∑ Powered by Jarvis</div>

</div>

<script>
const H="5ae67553136b2ba571f41239f4646eb489bb393b7d25717bf28bbbcdb24f1c04";
function sha256(m){return crypto.subtle.digest("SHA-256",new TextEncoder().encode(m)).then(b=>Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,"0")).join(""))}
function checkPw(){const p=document.getElementById("pw-input").value;sha256(p).then(h=>{if(h===H){localStorage.setItem("rr_dash_auth","1");show()}else{document.getElementById("login-error").style.display="block"}})}
function show(){document.getElementById("login-gate").style.display="none";document.getElementById("dashboard").style.display="block"}
document.getElementById("pw-input").addEventListener("keydown",e=>{if(e.key==="Enter")checkPw()});
if(localStorage.getItem("rr_dash_auth")==="1")show();

// To-Do functionality ‚Äî drag & drop + inline add
function getLocalTodos(){try{return JSON.parse(localStorage.getItem("rr_todos_v2")||"{}")}catch(e){return{}}}
function saveLocalTodos(t){localStorage.setItem("rr_todos_v2",JSON.stringify(t))}

function renderTodoItem(t, person){
  const deal=t.deal?`<span class="todo-deal">${t.deal}</span>`:"";
  const done=t.done?"done":"";
  return `<div class="todo-item ${t.priority} ${done}" draggable="true" data-id="${t.id}" data-person="${person}" data-priority="${t.priority}"><div class="todo-check" onclick="toggleTodo('${t.id}')"></div><div class="todo-text">${t.text}${deal}</div><div class="todo-actions"><button class="todo-action-btn todo-pri-cycle" onclick="cyclePriority('${t.id}')" title="Change priority">üî¥</button><button class="todo-action-btn todo-delete" onclick="deleteTodo('${t.id}')" title="Delete">‚úï</button></div><div class="todo-drag-handle">‚†ø</div></div>`;
}

// Apply done state + load local todos
(function(){
  const doneTodos=JSON.parse(localStorage.getItem("rr_todos_done")||"{}");
  document.querySelectorAll(".todo-item[data-id]").forEach(el=>{
    if(doneTodos[el.dataset.id])el.classList.add("done");
  });
  // Load locally-added todos into correct columns
  const local=getLocalTodos();
  Object.keys(local).forEach(person=>{
    const list=document.querySelector(`.todo-list[data-person="${person}"]`);
    if(list){
      local[person].forEach(t=>{
        if(!document.querySelector(`.todo-item[data-id="${t.id}"]`)){
          list.insertAdjacentHTML("beforeend",renderTodoItem(t,person));
        }
      });
    }
  });
  updateTodoCount();
  initDragDrop();
})();

function addInlineTodo(input){
  const text=input.value.trim();
  if(!text)return;
  const person=input.dataset.person;
  const id="local-"+Date.now();
  const todo={id:id,text:text,priority:"medium",deal:"",done:false};
  const local=getLocalTodos();
  if(!local[person])local[person]=[];
  local[person].push(todo);
  saveLocalTodos(local);
  const list=input.closest(".todo-column").querySelector(".todo-list");
  list.insertAdjacentHTML("beforeend",renderTodoItem(todo,person));
  initDragDrop();
  input.value="";
  updateTodoCount();
  // Track unsent items for Jarvis sync
  const unsent=JSON.parse(localStorage.getItem("rr_todo_unsent")||"[]");
  const personName=person.charAt(0).toUpperCase()+person.slice(1);
  unsent.push({person:personName,text:text,time:new Date().toLocaleString()});
  localStorage.setItem("rr_todo_unsent",JSON.stringify(unsent));
  showSyncBadge();
}

// Sync badge ‚Äî shows when there are unsent todos for Jarvis
function showSyncBadge(){
  const unsent=JSON.parse(localStorage.getItem("rr_todo_unsent")||"[]");
  let badge=document.getElementById("jarvis-sync-badge");
  if(unsent.length===0){if(badge)badge.style.display="none";return}
  if(!badge){
    badge=document.createElement("div");
    badge.id="jarvis-sync-badge";
    badge.style.cssText="position:fixed;bottom:20px;right:20px;background:#7A3B14;color:#FAFAFA;padding:10px 16px;border-radius:24px;cursor:pointer;font-size:13px;font-family:Work Sans,sans-serif;z-index:9999;box-shadow:0 2px 12px rgba(0,0,0,0.4);display:flex;align-items:center;gap:8px;";
    badge.onclick=syncToJarvis;
    document.body.appendChild(badge);
  }
  badge.innerHTML=`ü§ñ <span>${unsent.length} new todo${unsent.length>1?"s":""}</span> <span style="background:rgba(255,255,255,0.2);padding:2px 10px;border-radius:12px;font-weight:600;">Send to Jarvis</span>`;
  badge.style.display="flex";
}

function syncToJarvis(){
  const unsent=JSON.parse(localStorage.getItem("rr_todo_unsent")||"[]");
  if(unsent.length===0)return;
  let msg="üìå NEW TODOS from dashboard:\n";
  unsent.forEach(t=>{msg+=`\n‚Ä¢ ${t.person}: ${t.text}`});
  window.open("sms:+15089542159&body="+encodeURIComponent(msg),"_blank");
  localStorage.setItem("rr_todo_unsent","[]");
  showSyncBadge();
}

// Show badge on load if unsent items exist
showSyncBadge();

function toggleTodo(id){
  const el=document.querySelector(`.todo-item[data-id="${id}"]`);
  if(!el)return;
  el.classList.toggle("done");
  const doneTodos=JSON.parse(localStorage.getItem("rr_todos_done")||"{}");
  if(el.classList.contains("done")){doneTodos[id]=true}else{delete doneTodos[id]}
  localStorage.setItem("rr_todos_done",JSON.stringify(doneTodos));
  // For local todos
  const local=getLocalTodos();
  const person=el.dataset.person;
  if(local[person]){
    const lt=local[person].find(t=>t.id===id);
    if(lt){lt.done=!lt.done;saveLocalTodos(local)}
  }
  updateTodoCount();
}

function updateTodoCount(){
  const all=document.querySelectorAll(".todo-item");
  const active=[...all].filter(e=>!e.classList.contains("done")).length;
  const ct=document.getElementById("todo-count");
  if(ct)ct.textContent=active;
  // Update per-column counts
  document.querySelectorAll(".todo-column").forEach(col=>{
    const items=col.querySelectorAll(".todo-item");
    const activeCol=[...items].filter(e=>!e.classList.contains("done")).length;
    const badge=col.querySelector(".todo-column-count");
    if(badge)badge.textContent=activeCol;
  });
}

// Delete todo
function deleteTodo(id){
  const item=document.querySelector(`.todo-item[data-id="${id}"]`);
  if(!item)return;
  item.style.transition="opacity 0.2s";item.style.opacity="0";
  setTimeout(()=>{
    item.remove();
    // Remove from local todos
    const person=item.dataset.person;
    const local=getLocalTodos();
    if(local[person]){
      local[person]=local[person].filter(t=>t.id!==id);
      saveLocalTodos(local);
    }
    // Track server-rendered deletions
    const dels=JSON.parse(localStorage.getItem("rr_todo_deletes")||"[]");
    if(!dels.includes(id))dels.push(id);
    localStorage.setItem("rr_todo_deletes",JSON.stringify(dels));
    updateTodoCount();
  },200);
}

// Cycle priority: high ‚Üí medium ‚Üí low ‚Üí high
function cyclePriority(id){
  const item=document.querySelector(`.todo-item[data-id="${id}"]`);
  if(!item)return;
  const order=["high","medium","low"];
  const current=item.dataset.priority||"medium";
  const next=order[(order.indexOf(current)+1)%3];
  item.classList.remove("high","medium","low");
  item.classList.add(next);
  item.dataset.priority=next;
  // Save priority change
  const pris=JSON.parse(localStorage.getItem("rr_todo_priorities")||"{}");
  pris[id]=next;
  localStorage.setItem("rr_todo_priorities",JSON.stringify(pris));
  // Update local todos
  const person=item.dataset.person;
  const local=getLocalTodos();
  if(local[person]){
    const lt=local[person].find(t=>t.id===id);
    if(lt){lt.priority=next;saveLocalTodos(local)}
  }
}

// Apply saved deletions and priorities on load
(function(){
  const dels=JSON.parse(localStorage.getItem("rr_todo_deletes")||"[]");
  dels.forEach(id=>{
    const el=document.querySelector(`.todo-item[data-id="${id}"]`);
    if(el)el.remove();
  });
  const pris=JSON.parse(localStorage.getItem("rr_todo_priorities")||"{}");
  Object.keys(pris).forEach(id=>{
    const el=document.querySelector(`.todo-item[data-id="${id}"]`);
    if(el){
      el.classList.remove("high","medium","low");
      el.classList.add(pris[id]);
      el.dataset.priority=pris[id];
    }
  });
})();

// Edit todo on double-click
document.addEventListener("dblclick",function(e){
  const textEl=e.target.closest(".todo-text");
  if(!textEl)return;
  const item=textEl.closest(".todo-item");
  if(!item||item.querySelector(".todo-edit-input"))return;
  const currentText=textEl.childNodes[0]?textEl.childNodes[0].textContent.trim():textEl.textContent.trim();
  const input=document.createElement("input");
  input.type="text";
  input.className="todo-edit-input";
  input.value=currentText;
  const dealSpan=textEl.querySelector(".todo-deal");
  textEl.innerHTML="";
  textEl.appendChild(input);
  if(dealSpan)textEl.appendChild(dealSpan);
  input.focus();
  input.select();
  function save(){
    const newText=input.value.trim();
    if(!newText)return cancel();
    textEl.innerHTML="";
    textEl.appendChild(document.createTextNode(newText));
    if(dealSpan){textEl.appendChild(document.createTextNode(" "));textEl.appendChild(dealSpan)}
    // Save edit to localStorage
    const id=item.dataset.id;
    const edits=JSON.parse(localStorage.getItem("rr_todo_edits")||"{}");
    edits[id]=newText;
    localStorage.setItem("rr_todo_edits",JSON.stringify(edits));
    // Also update local todos if applicable
    const person=item.dataset.person;
    const local=getLocalTodos();
    if(local[person]){
      const lt=local[person].find(t=>t.id===id);
      if(lt){lt.text=newText;saveLocalTodos(local)}
    }
  }
  function cancel(){
    textEl.innerHTML="";
    textEl.appendChild(document.createTextNode(currentText));
    if(dealSpan){textEl.appendChild(document.createTextNode(" "));textEl.appendChild(dealSpan)}
  }
  input.addEventListener("keydown",function(ev){
    if(ev.key==="Enter"){ev.preventDefault();save()}
    if(ev.key==="Escape")cancel();
  });
  input.addEventListener("blur",save);
});

// Apply saved edits on load
(function(){
  const edits=JSON.parse(localStorage.getItem("rr_todo_edits")||"{}");
  Object.keys(edits).forEach(id=>{
    const item=document.querySelector(`.todo-item[data-id="${id}"]`);
    if(item){
      const textEl=item.querySelector(".todo-text");
      const dealSpan=textEl.querySelector(".todo-deal");
      textEl.innerHTML="";
      textEl.appendChild(document.createTextNode(edits[id]));
      if(dealSpan){textEl.appendChild(document.createTextNode(" "));textEl.appendChild(dealSpan)}
    }
  });
})();

// Drag & Drop
let dragItem=null;
function initDragDrop(){
  document.querySelectorAll(".todo-item[draggable]").forEach(item=>{
    item.ondragstart=function(e){
      dragItem=this;
      this.classList.add("dragging");
      e.dataTransfer.effectAllowed="move";
      e.dataTransfer.setData("text/plain",this.dataset.id);
    };
    item.ondragend=function(){
      this.classList.remove("dragging");
      document.querySelectorAll(".todo-list").forEach(l=>l.classList.remove("drag-over"));
      dragItem=null;
    };
  });
  document.querySelectorAll(".todo-list[data-person]").forEach(list=>{
    list.ondragover=function(e){
      e.preventDefault();
      e.dataTransfer.dropEffect="move";
      this.classList.add("drag-over");
    };
    list.ondragleave=function(){this.classList.remove("drag-over")};
    list.ondrop=function(e){
      e.preventDefault();
      this.classList.remove("drag-over");
      if(!dragItem)return;
      const newPerson=this.dataset.person;
      const oldPerson=dragItem.dataset.person;
      dragItem.dataset.person=newPerson;
      this.appendChild(dragItem);
      // Update local storage for moved items
      if(dragItem.dataset.id.startsWith("local-")){
        const local=getLocalTodos();
        if(local[oldPerson]){
          const idx=local[oldPerson].findIndex(t=>t.id===dragItem.dataset.id);
          if(idx>-1){
            const [moved]=local[oldPerson].splice(idx,1);
            if(!local[newPerson])local[newPerson]=[];
            local[newPerson].push(moved);
            saveLocalTodos(local);
          }
        }
      }else{
        // Track server-rendered item moves
        const moves=JSON.parse(localStorage.getItem("rr_todo_moves")||"{}");
        moves[dragItem.dataset.id]=newPerson;
        localStorage.setItem("rr_todo_moves",JSON.stringify(moves));
      }
      updateTodoCount();
    };
  });
}
</script>

</body>
</html>