<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="300">
<title>Transaction Dashboard ‚Äî Realty Ryan</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Work+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: #1a1408; font-family: 'Work Sans', sans-serif; color: #FAFAFA; min-height: 100vh; }

/* Password Gate */
#login-gate { display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px; }
#dashboard { display: none; }
.login-box { background: #261A05; padding: 48px; border-radius: 12px; border: 1px solid #5C3D14; width: 100%; max-width: 380px; text-align: center; }
.login-box h1 { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 300; letter-spacing: 0.15em; text-transform: uppercase; margin-bottom: 8px; }
.login-box .sub { font-size: 13px; color: #857D52; margin-bottom: 32px; }
.login-box input { width: 100%; padding: 14px 16px; background: #1a1408; border: 1px solid #5C3D14; border-radius: 6px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 14px; margin-bottom: 16px; outline: none; }
.login-box input:focus { border-color: #7A3B14; }
.login-box button { width: 100%; padding: 14px; background: #7A3B14; color: #FAFAFA; border: none; border-radius: 6px; font-family: 'Work Sans', sans-serif; font-size: 14px; font-weight: 600; cursor: pointer; text-transform: uppercase; letter-spacing: 0.1em; }
.login-box button:hover { background: #9A4B1A; }
.login-error { color: #ff887c; font-size: 12px; margin-bottom: 12px; display: none; }

/* Header */
.header { background: #261A05; padding: 20px 24px; border-bottom: 3px solid #7A3B14; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
.header h1 { font-family: 'Cormorant Garamond', serif; font-size: 24px; font-weight: 300; letter-spacing: 0.12em; text-transform: uppercase; color: #FAFAFA; }
.header .date { font-size: 12px; color: #857D52; }
.new-listing-btn { display: inline-flex; align-items: center; gap: 6px; padding: 10px 20px; background: #7A3B14; color: #FAFAFA; text-decoration: none; border-radius: 6px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; transition: background 0.2s; }
.new-listing-btn:hover { background: #9A4B1A; }
.header .stats { display: flex; gap: 16px; flex-wrap: wrap; }
.stat { text-align: center; }
.stat-num { font-family: 'Cormorant Garamond', serif; font-size: 28px; font-weight: 600; color: #7A3B14; }
.stat-label { font-size: 10px; text-transform: uppercase; letter-spacing: 0.1em; color: #857D52; }

/* Section Headers */
.section-header { padding: 16px 24px 8px; display: flex; align-items: center; gap: 12px; }
.section-header h2 { font-family: 'Cormorant Garamond', serif; font-size: 20px; font-weight: 600; color: #FAFAFA; letter-spacing: 0.08em; }
.section-badge { background: #7A3B14; color: #FAFAFA; font-size: 11px; font-weight: 600; padding: 2px 10px; border-radius: 12px; }

/* Kanban Board */
.kanban { display: flex; gap: 12px; padding: 12px 24px 24px; overflow-x: auto; min-height: 200px; -webkit-overflow-scrolling: touch; }
.kanban-col { flex: 0 0 240px; background: #261A05; border-radius: 8px; overflow: hidden; }
.kanban-col-header { padding: 12px 14px 8px; border-bottom: 2px solid; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; display: flex; justify-content: space-between; align-items: center; }
.kanban-col-header .count { background: rgba(255,255,255,0.1); padding: 1px 8px; border-radius: 10px; font-size: 11px; }
.kanban-cards { padding: 8px; display: flex; flex-direction: column; gap: 8px; }

/* Cards */
.card { background: #1a1408; border-radius: 6px; padding: 12px; border-left: 3px solid; cursor: pointer; transition: transform 0.15s; display: block; }
.card:hover { transform: translateY(-1px); }
.card-address { font-weight: 600; font-size: 13px; color: #FAFAFA; margin-bottom: 3px; }
.card-client { font-size: 11px; color: #857D52; margin-bottom: 4px; }
.card-price { font-family: 'Cormorant Garamond', serif; font-size: 18px; font-weight: 600; color: #7A3B14; }
.card-note { font-size: 10px; color: #857D52; margin-top: 4px; font-style: italic; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 220px; }
.card-meta { display: flex; justify-content: space-between; margin-top: 6px; font-size: 10px; color: #857D52; }

/* Column Colors */
.col-prep .kanban-col-header { border-color: #dbadff; color: #dbadff; }
.col-prep .card { border-left-color: #dbadff; }
.col-live .kanban-col-header { border-color: #46d67a; color: #46d67a; }
.col-live .card { border-left-color: #46d67a; }
.col-dd .kanban-col-header { border-color: #fbd75b; color: #fbd75b; }
.col-dd .card { border-left-color: #fbd75b; }
.col-closed .kanban-col-header { border-color: #5C3D14; color: #5C3D14; }
.col-closed .card { border-left-color: #5C3D14; }
.col-signed .kanban-col-header { border-color: #46d6db; color: #46d6db; }
.col-signed .card { border-left-color: #46d6db; }
.col-unsigned .kanban-col-header { border-color: #ff887c; color: #ff887c; }
.col-unsigned .card { border-left-color: #ff887c; }
.col-pending .kanban-col-header { border-color: #fbd75b; color: #fbd75b; }
.col-pending .card { border-left-color: #fbd75b; }

/* To-Do List */
.todo-section { padding: 12px 24px; }
.todo-list { display: flex; flex-direction: column; gap: 6px; }
.todo-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 14px; background: #261A05; border-radius: 6px; border-left: 3px solid #5C3D14; font-size: 13px; line-height: 1.4; }
.todo-item.high { border-left-color: #ff887c; }
.todo-item.medium { border-left-color: #fbd75b; }
.todo-item.low { border-left-color: #46d67a; }
.todo-check { width: 16px; height: 16px; border: 2px solid #5C3D14; border-radius: 3px; flex-shrink: 0; margin-top: 1px; cursor: pointer; }
.todo-text { flex: 1; color: #FAFAFA; }
.todo-deal { font-size: 10px; color: #7A3B14; background: rgba(122,59,20,0.2); padding: 1px 8px; border-radius: 10px; white-space: nowrap; margin-left: 8px; }
.todo-item .todo-check:hover { border-color: #7A3B14; background: rgba(122,59,20,0.2); }
.todo-item.done { opacity: 0.4; }
.todo-item.done .todo-text { text-decoration: line-through; }
.todo-add { margin-top: 10px; }
.todo-add-row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.todo-add-input { flex: 1; min-width: 200px; padding: 10px 12px; background: #261A05; border: 1px solid #5C3D14; border-radius: 6px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 13px; outline: none; }
.todo-add-input:focus { border-color: #7A3B14; }
.todo-add-select { padding: 10px 8px; background: #261A05; border: 1px solid #5C3D14; border-radius: 6px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 12px; outline: none; appearance: none; }
.todo-add-deal { width: 140px; padding: 10px 12px; background: #261A05; border: 1px solid #5C3D14; border-radius: 6px; color: #FAFAFA; font-family: 'Work Sans', sans-serif; font-size: 13px; outline: none; }
.todo-add-deal:focus { border-color: #7A3B14; }
.todo-add-btn { padding: 10px 18px; background: #7A3B14; color: #FAFAFA; border: none; border-radius: 6px; font-family: 'Work Sans', sans-serif; font-size: 13px; font-weight: 600; cursor: pointer; white-space: nowrap; }
.todo-add-btn:hover { background: #9A4B1A; }

/* Divider */
.divider { height: 1px; background: #5C3D14; margin: 8px 24px; }
.footer { padding: 16px 24px; text-align: center; font-size: 11px; color: #5C3D14; }

/* MOBILE */
@media (max-width: 768px) {
  .header { flex-direction: column; align-items: flex-start; padding: 16px; }
  .header h1 { font-size: 20px; }
  .header .stats { gap: 12px; }
  .stat-num { font-size: 24px; }
  .section-header { padding: 12px 16px 6px; }
  .section-header h2 { font-size: 18px; }
  .kanban { padding: 8px 16px 20px; gap: 10px; }
  .kanban-col { flex: 0 0 200px; }
  .card { padding: 10px; }
  .card-address { font-size: 12px; }
  .card-price { font-size: 16px; }
  .card-note { max-width: 175px; }
  .divider { margin: 8px 16px; }
  .footer { padding: 12px 16px; }
}

@media (max-width: 480px) {
  .kanban { padding: 8px 12px 16px; }
  .kanban-col { flex: 0 0 180px; }
  .card-note { max-width: 155px; font-size: 9px; }
  .login-box { padding: 32px 24px; }
}
</style>
</head>
<body>

<!-- PASSWORD GATE -->
<div id="login-gate">
  <div class="login-box">
    <h1>Realty Ryan</h1>
    <div class="sub">Transaction Dashboard</div>
    <div class="login-error" id="login-error">Incorrect password</div>
    <input type="password" id="pw-input" placeholder="Enter password" autofocus>
    <button onclick="checkPw()">Access Dashboard</button>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

<div class="header">
  <div>
    <h1>Transaction Dashboard</h1>
    <div class="date">Updated: February 16, 2026 ¬∑ 04:48 PM</div>
  </div>
  <a href="new-listing.html" class="new-listing-btn">üìã New Listing</a>
  <a href="new-buyer.html" class="new-listing-btn" style="background:#2a5a3a;">üè° New Buyer</a>
  <a href="listing-appointment.html" class="new-listing-btn" style="background:#3a2a5a;">üìä Listing Appt</a>
  <div class="stats">
    <div class="stat"><div class="stat-num">7</div><div class="stat-label">Active</div></div>
    <div class="stat"><div class="stat-num">3</div><div class="stat-label">WIP</div></div>
    <div class="stat"><div class="stat-num">4</div><div class="stat-label">Under Contract</div></div>
    <div class="stat"><div class="stat-num">6</div><div class="stat-label">Buyers</div></div>
  </div>
</div>


<div class="section-header">
  <h2>üìå To-Do</h2>
  <span class="section-badge" id="todo-count">6</span>
</div>
<div class="todo-section">
  <div class="todo-list" id="todo-list">
      <div class="todo-item high" data-id="1" onclick="toggleTodo('1')"><div class="todo-check"></div><div class="todo-text">Drive by 4309 The Plaza ‚Äî assess 4-plex for Marcello Homes (Viktor &amp; Marish Bogun) co-listing<span class="todo-deal">4309 The Plaza</span></div></div>
      <div class="todo-item high" data-id="2" onclick="toggleTodo('2')"><div class="todo-check"></div><div class="todo-text">Talk to builders about lots for Alexa &amp; Matt Evans ‚Äî Keen (Alex Bailey), Chiott, Epic Homes, Highlight, A3 Custom<span class="todo-deal">Evans Build</span></div></div>
      <div class="todo-item medium" data-id="3" onclick="toggleTodo('3')"><div class="todo-check"></div><div class="todo-text">Review Evans land search results ‚Äî 30+ builder-owned lots in target areas compiled<span class="todo-deal">Evans Build</span></div></div>
      <div class="todo-item high" data-id="4" onclick="toggleTodo('4')"><div class="todo-check"></div><div class="todo-text">Send Buyer Agency Agreement to unsigned buyers</div></div>
      <div class="todo-item medium" data-id="5" onclick="toggleTodo('5')"><div class="todo-check"></div><div class="todo-text">Have Ally update FUB pipeline stages (back Feb 20)</div></div>
      <div class="todo-item medium" data-id="6" onclick="toggleTodo('6')"><div class="todo-check"></div><div class="todo-text">Pull agent email list from MLS ‚Äî import into FUB tagged as Agent + New Listing Alerts for realtor event campaigns</div></div>
  </div>
  <div class="todo-add" id="todo-add">
    <div class="todo-add-row">
      <input type="text" id="todo-input" placeholder="Add a to-do..." class="todo-add-input">
      <select id="todo-priority" class="todo-add-select">
        <option value="high">üî¥ High</option>
        <option value="medium" selected>üü° Medium</option>
        <option value="low">üü¢ Low</option>
      </select>
      <input type="text" id="todo-deal" placeholder="Deal (optional)" class="todo-add-deal">
      <button onclick="addTodo()" class="todo-add-btn">+ Add</button>
    </div>
  </div>
</div>
<div class="divider"></div>


<div class="section-header">
  <h2>Listings</h2>
  <span class="section-badge">15</span>
</div>
<div class="kanban">
  <div class="kanban-col col-prep">
    <div class="kanban-col-header">WIP / Pre-List <span class="count">3</span></div>
    <div class="kanban-cards">
      <a href="deals/27.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4309 The Plaza</div>
        <div class="card-client">Viktor Bogun</div>
        <div class="card-note">Co-listing ‚Äî Marish just got her RE license ¬∑ Listing Prospect ‚Äî needs drive-by assessment</div>
      </a>
      <a href="deals/26.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">113 Scottsmoor</div>
        <div class="card-client">Brett Cockerham</div>
        <div class="card-note">Brett &amp; Sonia Cockerham ¬∑ Signed listing - Pre-market (WIP)</div>
      </a>
      <a href="deals/24.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">709 Tennyson Drive</div>
        <div class="card-client">Shayna Seals, Jordan Seals</div>
        <div class="card-note">Signed listing agreement - Pre-market (WIP) ¬∑ Planning to list when trees bloom (spring 2026)</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-live">
    <div class="kanban-col-header">Active <span class="count">7</span></div>
    <div class="kanban-cards">
      <a href="deals/6.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">626 Shelton</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$4M</div>
        <div class="card-note">Active listing on market</div>
      </a>
      <a href="deals/7.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">3208 Mayfield</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$3.12M</div>
        <div class="card-note">Active listing - ~12 months until completion (early 2027)</div>
      </a>
      <a href="deals/8.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">3320 Mayfield</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$3.08M</div>
        <div class="card-note">Active listing - ~12 months until completion (early 2027)</div>
      </a>
      <a href="deals/9.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">3321 Auburn Ave</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$2.88M</div>
        <div class="card-note">Active listing - Framing stage, expected completion early fall 2026</div>
      </a>
      <a href="deals/11.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1820 Parson</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$1.60M</div>
        <div class="card-note">Active listing - Framing stage, expected completion fall 2026</div>
      </a>
      <a href="deals/12.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4041 Hiddenbrook Dr</div>
        <div class="card-client">Fiorella Freile</div>
        <div class="card-price">$1.50M</div>
        <div class="card-note">Fiorella Freile &amp; Jefferson Ovalle ¬∑ Active listing - Just on market, lots of showings</div>
      </a>
      <a href="deals/20.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">4601 General Pershing Dr</div>
        <div class="card-client">Nathan Holbrook, Lauren Holbrook</div>
        <div class="card-price">$650,000</div>
        <div class="card-note">Listing lead</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-dd">
    <div class="kanban-col-header">Under Contract <span class="count">4</span></div>
    <div class="kanban-cards">
      <a href="deals/10.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1437 Montford</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$2.23M</div>
        <div class="card-note">Under Contract ‚Äî Expected closing in 2-3 months (April/May 2026)</div>
        <div class="card-meta"><span>‚è∞ 57d ¬∑ Apr 15</span></div>
      </a>
      <a href="deals/5.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1816 Parson St</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$1.45M</div>
        <div class="card-note">Under Contract at $1,450,000</div>
        <div class="card-meta"><span>‚è∞ 13d ¬∑ Mar 02</span></div>
      </a>
      <a href="deals/4.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">6040 Coatbridge Lane</div>
        <div class="card-client">Stuart Mossian</div>
        <div class="card-price">$620,000</div>
        <div class="card-note">Listing - Under Contract ¬∑ Buyers are purchasing 6527 Burlwood Road ($960K)</div>
        <div class="card-meta"><span>‚è∞ 9d ¬∑ Feb 26</span></div>
      </a>
      <a href="deals/14.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">404 N Laurel Ave</div>
        <div class="card-client">William Scolinos</div>
        <div class="card-price">$289,000</div>
        <div class="card-note">Under Contract - Through due diligence ¬∑ Closing: Feb 25, 2026</div>
        <div class="card-meta"><span>‚è∞ 8d ¬∑ Feb 25</span></div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-closed">
    <div class="kanban-col-header">Closed <span class="count">1</span></div>
    <div class="kanban-cards">
      <a href="deals/15.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">1817 Union</div>
        <div class="card-client">Alex Bailey</div>
        <div class="card-price">$1.45M</div>
        <div class="card-note">Closed at $1,450,000</div>
      </a>
    </div>
  </div>
</div>

<div class="divider"></div>

<div class="section-header">
  <h2>Buyers</h2>
  <span class="section-badge">6</span>
</div>
<div class="kanban">
  <div class="kanban-col col-signed">
    <div class="kanban-col-header">BAA Signed ‚úÖ <span class="count">0</span></div>
    <div class="kanban-cards">

    </div>
  </div>
  <div class="kanban-col col-unsigned">
    <div class="kanban-col-header">No BAA ‚ö†Ô∏è <span class="count">5</span></div>
    <div class="kanban-cards">
      <a href="deals/22.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Alexa &amp; Matt Evans - Buyer</div>
        <div class="card-client">Alexa Evans</div>
        <div class="card-price">$3M</div>
        <div class="card-note">Budget: $3M target (stretch to $3.5M) ¬∑ Lot: 0.4+ acres, flat, pool, walkable</div>
      </a>
      <a href="deals/25.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Shayna &amp; Jordan Seals - Buyer</div>
        <div class="card-client">Shayna Seals, Jordan Seals</div>
        <div class="card-price">$1.20M</div>
        <div class="card-note">Budget: $1.2M max (may stretch for right home) ¬∑ Areas: South Charlotte (Providence Crossing, Berkeley in 28277), Waxhaw, Ballantyne</div>
      </a>
      <a href="deals/21.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Lindsey Anderson - Buyer</div>
        <div class="card-client">Lindsey Anderson</div>
        <div class="card-price">$700,000</div>
        <div class="card-note">Budget: Comfortable around $700K, willing to go higher for the right home ¬∑ Tags: investor-interest, new-construction</div>
      </a>
      <a href="deals/23.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Matt &amp; Nina Houser - Buyer</div>
        <div class="card-client">Matt Houser, Nina Houser</div>
        <div class="card-price">$250,000</div>
        <div class="card-note">Budget: $200K-$300K for land ¬∑ Owners of Green Life Charlotte (matt@greenlifeclt.com)</div>
      </a>
      <a href="deals/28.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">Matt Connelly - Buyer</div>
        <div class="card-client">Matt Connelly</div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-pending">
    <div class="kanban-col-header">Under Contract <span class="count">1</span></div>
    <div class="kanban-cards">
      <a href="deals/2.html" class="card" style="text-decoration:none;color:inherit;">
        <div class="card-address">6527 Burlwood Road</div>
        <div class="card-client">Stuart Mossian</div>
        <div class="card-price">$960,000</div>
        <div class="card-meta"><span>‚è∞ 9d ¬∑ Feb 26</span></div>
      </a>
    </div>
  </div>
  <div class="kanban-col col-closed">
    <div class="kanban-col-header">Closed <span class="count">0</span></div>
    <div class="kanban-cards">

    </div>
  </div>
</div>

<div class="footer">Realty Ryan & Associates ¬∑ Powered by Jarvis</div>

</div>

<script>
const H="5ae67553136b2ba571f41239f4646eb489bb393b7d25717bf28bbbcdb24f1c04";
function sha256(m){return crypto.subtle.digest("SHA-256",new TextEncoder().encode(m)).then(b=>Array.from(new Uint8Array(b)).map(x=>x.toString(16).padStart(2,"0")).join(""))}
function checkPw(){const p=document.getElementById("pw-input").value;sha256(p).then(h=>{if(h===H){localStorage.setItem("rr_dash_auth","1");show()}else{document.getElementById("login-error").style.display="block"}})}
function show(){document.getElementById("login-gate").style.display="none";document.getElementById("dashboard").style.display="block"}
document.getElementById("pw-input").addEventListener("keydown",e=>{if(e.key==="Enter")checkPw()});
if(localStorage.getItem("rr_dash_auth")==="1")show();

// To-Do functionality
function getLocalTodos(){try{return JSON.parse(localStorage.getItem("rr_todos")||"[]")}catch(e){return[]}}
function saveLocalTodos(t){localStorage.setItem("rr_todos",JSON.stringify(t))}

function renderTodoItem(t){
  const deal=t.deal?`<span class="todo-deal">${t.deal}</span>`:"";
  const done=t.done?"done":"";
  return `<div class="todo-item ${t.priority} ${done}" data-id="${t.id}" onclick="toggleTodo('${t.id}')"><div class="todo-check"></div><div class="todo-text">${t.text}${deal}</div></div>`;
}

// Load local todos on page load
(function(){
  const localTodos=getLocalTodos();
  if(localTodos.length>0){
    const list=document.getElementById("todo-list");
    if(list){
      localTodos.forEach(t=>{list.insertAdjacentHTML("beforeend",renderTodoItem(t))});
      const ct=document.getElementById("todo-count");
      if(ct)ct.textContent=parseInt(ct.textContent||"0")+localTodos.filter(t=>!t.done).length;
    }
  }
  // Apply done state to server-rendered todos
  const doneTodos=JSON.parse(localStorage.getItem("rr_todos_done")||"{}");
  document.querySelectorAll(".todo-item[data-id]").forEach(el=>{
    if(doneTodos[el.dataset.id])el.classList.add("done");
  });
})();

function addTodo(){
  const input=document.getElementById("todo-input");
  const text=input.value.trim();
  if(!text)return;
  const pri=document.getElementById("todo-priority").value;
  const deal=document.getElementById("todo-deal").value.trim();
  const id="local-"+Date.now();
  const todo={id:id,text:text,priority:pri,deal:deal,done:false};
  const localTodos=getLocalTodos();
  localTodos.push(todo);
  saveLocalTodos(localTodos);
  const list=document.getElementById("todo-list");
  list.insertAdjacentHTML("beforeend",renderTodoItem(todo));
  const ct=document.getElementById("todo-count");
  if(ct)ct.textContent=parseInt(ct.textContent||"0")+1;
  input.value="";
  document.getElementById("todo-deal").value="";
  // Send to Jarvis via SMS
  const msg=encodeURIComponent("üìå NEW TODO\nTask: "+text+"\nPriority: "+pri+(deal?"\nDeal: "+deal:""));
  window.open("sms:+15089542159&body="+msg,"_blank");
}

function toggleTodo(id){
  const el=document.querySelector(`.todo-item[data-id="${id}"]`);
  if(!el)return;
  el.classList.toggle("done");
  // Save done state
  const doneTodos=JSON.parse(localStorage.getItem("rr_todos_done")||"{}");
  if(el.classList.contains("done")){doneTodos[id]=true}else{delete doneTodos[id]}
  localStorage.setItem("rr_todos_done",JSON.stringify(doneTodos));
  // For local todos
  const localTodos=getLocalTodos();
  const lt=localTodos.find(t=>t.id===id);
  if(lt){lt.done=!lt.done;saveLocalTodos(localTodos)}
  // Update count
  updateTodoCount();
}

function updateTodoCount(){
  const all=document.querySelectorAll(".todo-item");
  const active=[...all].filter(e=>!e.classList.contains("done")).length;
  const ct=document.getElementById("todo-count");
  if(ct)ct.textContent=active;
}

document.getElementById("todo-input")&&document.getElementById("todo-input").addEventListener("keydown",function(e){if(e.key==="Enter")addTodo()});
</script>

</body>
</html>